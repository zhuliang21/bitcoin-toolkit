<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Code Generator</title>
  <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="icon/favicon-16x16.png">
  <link rel="shortcut icon" href="icon/favicon.ico">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'mono': ['SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', 'Consolas', 'Courier New', 'monospace'],
          },
          animation: {
            'pulse-subtle': 'pulse 1.5s ease-in-out infinite',
            'fadeInUp': 'fadeInUp 0.3s ease-out',
            'fadeIn': 'fadeIn 0.2s ease-out',
            'modalZoomIn': 'modalZoomIn 0.25s ease-out'
          },
          keyframes: {
            fadeInUp: {
              from: {
                opacity: '0',
                transform: 'translateY(15px)'
              },
              to: {
                opacity: '1',
                transform: 'translateY(0)'
              }
            },
            fadeIn: {
              from: { opacity: '0' },
              to: { opacity: '1' }
            },
            modalZoomIn: {
              from: {
                transform: 'scale(0.9)',
                opacity: '0'
              },
              to: {
                transform: 'scale(1)',
                opacity: '1'
              }
            }
          }
        }
      }
    }
  </script>
  
  <style>
    /* Custom styles for elements that need specific behavior */
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .gradient-button-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .gradient-button-purple {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    }
    
    .backdrop-blur-glass {
      backdrop-filter: blur(10px);
    }

    /* Modal overlay */
    .modal-overlay {
      backdrop-filter: blur(20px);
    }

    /* Prevent flash of unstyled content during language initialization */
    body.loading {
      visibility: hidden;
    }
  </style>
</head>
<body class="bg-white min-h-screen font-sans text-gray-900 transition-opacity duration-100" style="visibility: hidden;">
  <!-- Main Container -->
  <div class="max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-5xl mx-auto bg-white 
              rounded-t-3xl md:rounded-3xl md:my-5 lg:my-8 
              overflow-hidden min-h-screen md:min-h-0 md:shadow-xl">
    
    <!-- Header with Gradient Background -->
    <div class="gradient-bg text-white relative rounded-b-3xl 
                px-6 py-16 md:px-12 md:py-20 lg:px-16 lg:py-24 text-center">
      
      <!-- Top Handle (Mobile) -->
      <div class="absolute top-3 left-1/2 transform -translate-x-1/2 
                  w-9 h-1.5 bg-white/30 rounded-full md:hidden"></div>
      
      <!-- Back Link -->
      <a href="index.html" 
         class="absolute top-5 left-6 md:left-12 lg:left-16 
                text-white/80 hover:text-white text-sm font-medium 
                flex items-center justify-center px-3 py-1.5 md:px-4 md:py-2 
                rounded-full bg-white/10 hover:bg-white/20 
                backdrop-blur-glass border border-white/20 
                transition-all duration-300 min-w-11 h-8 md:min-w-12 md:h-10" 
         data-i18n="back">
        ‚Üê
      </a>
      
      <!-- Language Toggle -->
      <button class="language-toggle absolute top-5 right-6 md:right-12 lg:right-16 
                     bg-white/10 hover:bg-white/20 border border-white/20 
                     rounded-full px-3 py-1.5 md:px-4 md:py-2 
                     text-white/80 hover:text-white text-sm font-medium 
                     cursor-pointer transition-all duration-300 
                     backdrop-blur-glass min-w-11 h-8 md:min-w-12 md:h-10 
                     flex items-center justify-center" 
              onclick="toggleLanguage()">
        ENG
      </button>
      
      <!-- Title -->
      <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-2 tracking-tight" 
          data-i18n="title">
        QR Code Generator
      </h1>
    </div>
    
    <!-- Input Section -->
    <div class="p-6 md:p-12 lg:p-16 bg-white border-b border-gray-100">
      <div class="space-y-6">
        <!-- Text Input -->
        <div>
          <label class="block text-sm font-semibold text-gray-900 mb-2 tracking-tight" 
                 data-i18n="textLabel">
            Text/URL
          </label>
          <textarea 
            id="text" 
            rows="3"
            data-i18n-placeholder="textPlaceholder"
            placeholder="Enter text, URL, or any content"
            class="w-full p-4 md:p-5 border-2 border-gray-100 
                   rounded-2xl text-base bg-gray-50/50 text-gray-900 
                   font-normal resize-y transition-all duration-300 
                   focus:outline-none focus:border-indigo-500 focus:bg-white 
                   focus:shadow-lg focus:-translate-y-0.5 focus:scale-101
                   placeholder-gray-400">
          </textarea>
        </div>
        
        <!-- Tag Input -->
        <div>
          <label class="block text-sm font-semibold text-gray-900 mb-2 tracking-tight" 
                 data-i18n="tagLabel">
            Tag (Optional)
          </label>
          <input 
            type="text" 
            id="tag"
            data-i18n-placeholder="tagPlaceholder"
            placeholder="Enter tag for organizing"
            class="w-full p-4 md:p-5 border-2 border-gray-100 
                   rounded-2xl text-base bg-gray-50/50 text-gray-900 
                   font-normal transition-all duration-300 
                   focus:outline-none focus:border-indigo-500 focus:bg-white 
                   focus:shadow-lg focus:-translate-y-0.5 focus:scale-101
                   placeholder-gray-400">
        </div>
        
        <!-- Generate Button -->
        <div class="text-center pt-2">
          <button 
            id="generate"
            class="gradient-button-primary text-white px-8 py-3 md:px-10 md:py-4 
                   rounded-xl md:rounded-2xl text-base font-semibold cursor-pointer 
                   transition-all duration-300 shadow-lg 
                   hover:-translate-y-0.5 hover:shadow-xl 
                   active:translate-y-0 min-w-40"
            data-i18n="generateBtn">
            Generate QR Code
          </button>
        </div>
      </div>
    </div>
    
    <!-- Content Section -->
    <div id="mainSection" class="p-6 md:p-12 lg:p-16 bg-white hidden">
      <div class="bg-white rounded-2xl md:rounded-3xl p-6 md:p-8 lg:p-10 
                  border border-gray-100 shadow-sm hover:shadow-md 
                  transition-all duration-300">
        <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-6 md:mb-8 tracking-tight 
                   flex items-center gap-2">
          <span class="text-2xl">üì±</span>
          <span data-i18n="qrTitle">QR Code</span>
        </h2>
        
        <!-- QR Code Display -->
        <div class="text-center mb-6">
          <canvas id="qr-canvas" class="hidden"></canvas>
          <img 
            id="qr-image" 
            class="hidden max-w-full h-auto rounded-2xl border border-gray-100 
                   cursor-pointer transition-transform duration-200 ease-out 
                   hover:scale-105 mx-auto shadow-lg" 
            onclick="openModal()" />
        </div>
        
        <!-- Download Button -->
        <div class="text-center">
          <button 
            id="download" 
            disabled
            class="gradient-button-purple text-white px-6 py-3 md:px-8 md:py-4 
                   rounded-xl md:rounded-2xl text-base font-semibold cursor-pointer 
                   transition-all duration-300 shadow-lg 
                   hover:-translate-y-0.5 hover:shadow-xl 
                   active:translate-y-0 disabled:opacity-60 disabled:cursor-not-allowed 
                   disabled:transform-none disabled:shadow-lg min-w-40"
            data-i18n="downloadBtn">
            üì• Download PNG
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Full Screen Modal -->
  <div 
    id="modal-overlay" 
    class="modal-overlay fixed inset-0 bg-black/90 z-50 
           justify-center items-center cursor-pointer 
           animate-fadeIn hidden"
    onclick="closeModal()">
    <img 
      id="modal-image" 
      class="max-w-[90%] max-h-[90%] rounded-3xl border border-white/10 
             animate-modalZoomIn" />
  </div>
  
  <!-- Scripts -->
  <script src="dist/qr.bundle.js"></script>
  
  <script>
    // Enhanced functions for Tailwind integration
    function showQRResult() {
      const mainSection = document.getElementById('mainSection');
      if (mainSection) {
        mainSection.classList.remove('hidden');
        mainSection.classList.add('animate-fadeInUp');
      }
    }

    function hideQRResult() {
      const mainSection = document.getElementById('mainSection');
      if (mainSection) {
        mainSection.classList.add('hidden');
        mainSection.classList.remove('animate-fadeInUp');
      }
    }

    function openModal() {
      const modal = document.getElementById('modal-overlay');
      const modalImage = document.getElementById('modal-image');
      const qrImage = document.getElementById('qr-image');
      
      if (modal && modalImage && qrImage) {
        modalImage.src = qrImage.src;
        modal.classList.remove('hidden');
        modal.classList.add('flex');
      }
    }

    function closeModal() {
      const modal = document.getElementById('modal-overlay');
      if (modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      }
    }

    // Close modal on Escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeModal();
      }
    });

    // Override original functions if they exist
    if (typeof window !== 'undefined') {
      // Make functions available globally
      window.showQRResult = showQRResult;
      window.hideQRResult = hideQRResult;
      window.openModal = openModal;
      window.closeModal = closeModal;
    }

    // Language support
    const translations = {
      en: {
        title: 'QR Code Generator',
        back: '‚Üê',
        textLabel: 'Text/URL',
        textPlaceholder: 'Enter text, URL, or any content',
        tagLabel: 'Tag (Optional)',
        tagPlaceholder: 'Enter tag for organizing',
        generateBtn: 'Generate QR Code',
        qrTitle: 'QR Code',
        downloadBtn: 'üì• Download PNG'
      },
      zh: {
        title: '‰∫åÁª¥Á†ÅÁîüÊàêÂô®',
        back: '‚Üê',
        textLabel: 'ÊñáÊú¨/ÁΩëÂùÄ',
        textPlaceholder: 'ËæìÂÖ•ÊñáÊú¨„ÄÅÁΩëÂùÄÊàñ‰ªª‰ΩïÂÜÖÂÆπ',
        tagLabel: 'Ê†áÁ≠æÔºàÂèØÈÄâÔºâ',
        tagPlaceholder: 'ËæìÂÖ•Áî®‰∫éÁªÑÁªáÁöÑÊ†áÁ≠æ',
        generateBtn: 'ÁîüÊàê‰∫åÁª¥Á†Å',
        qrTitle: '‰∫åÁª¥Á†Å',
        downloadBtn: 'üì• ‰∏ãËΩΩPNG'
      }
    };

    let currentLanguage = localStorage.getItem('language') || 'en';

    function updateTexts() {
      const texts = translations[currentLanguage];
      document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (texts[key]) {
          element.textContent = texts[key];
        }
      });

      document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        if (texts[key]) {
          element.placeholder = texts[key];
        }
      });

      const toggleBtn = document.querySelector('.language-toggle');
      if (toggleBtn) {
        toggleBtn.textContent = currentLanguage === 'en' ? '‰∏≠Êñá' : 'ENG';
      }

      document.documentElement.lang = currentLanguage;
    }

    function toggleLanguage() {
      currentLanguage = currentLanguage === 'en' ? 'zh' : 'en';
      localStorage.setItem('language', currentLanguage);
      updateTexts();
    }

    // Initialize language on page load
    updateTexts();

    // Show content after language is set
    setTimeout(() => {
      document.body.style.visibility = 'visible';
    }, 50);
  </script>
</body>
</html>
