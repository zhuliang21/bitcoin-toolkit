<!DOCTYPE html>
<html lang="en">
<head>
  <style>html,body{opacity:0!important;transition:opacity .3s ease-in-out}html.loaded,body.loaded{opacity:1!important}</style>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brain Wallet</title>
  
  <!-- Preload critical resources to reduce flash -->
  <link rel="preload" href="dist/brain-wallet.bundle.js" as="script">

  
  <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="icon/favicon-16x16.png">
  <link rel="shortcut icon" href="icon/favicon.ico">
  
  <!-- Tailwind CSS -->
  <link href="./css/tailwind.css" rel="stylesheet">
  
  <style>
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.3s ease-in-out;
    }
    
    .modal-overlay.hidden {
      display: none;
    }
    
    .modal-content {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 24px;
      padding: 2rem;
      max-width: 90vw;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      animation: modalSlideIn 0.3s ease-out;
    }
    
    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
  </style>

</head>

<body class="gradient-bg min-h-screen font-sans text-slate-700 relative overflow-x-hidden">
  
  <!-- Disclaimer Modal -->
  <div id="disclaimerModal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="text-center mb-6">
        <h2 class="text-2xl md:text-3xl font-bold text-slate-700 mb-2">
          🧠 Brain Wallet
        </h2>
        <p class="text-slate-500 text-sm">
          Important Disclaimer & Security Notice
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <!-- English -->
        <div class="space-y-4">
          <h3 class="font-bold text-slate-700 text-lg border-b border-slate-200 pb-2">
            English
          </h3>
          <ul class="space-y-3 text-sm text-slate-600">
            <li class="flex items-start gap-2">
              <span class="text-green-600 mt-1 text-xs">●</span>
              <span><strong>Open Source:</strong> This project is open source and recommended for offline use to ensure maximum security.</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-amber-600 mt-1 text-xs">●</span>
              <span><strong>Security Risk:</strong> Brain wallets carry inherent risks. Please ensure you use sufficiently long and complex passphrases with high entropy.</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-red-600 mt-1 text-xs">●</span>
              <span><strong>Educational Only:</strong> This tool is for educational purposes only. Never use it with real funds or production environments.</span>
            </li>
          </ul>
        </div>
        
        <!-- Chinese -->
        <div class="space-y-4">
          <h3 class="font-bold text-slate-700 text-lg border-b border-slate-200 pb-2">
            中文
          </h3>
          <ul class="space-y-3 text-sm text-slate-600">
            <li class="flex items-start gap-2">
              <span class="text-green-600 mt-1 text-xs">●</span>
              <span><strong>开源项目：</strong> 本项目为开源项目，建议离线使用以确保最大安全性。</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-amber-600 mt-1 text-xs">●</span>
              <span><strong>安全风险：</strong> 脑钱包存在固有风险，请确保使用足够长且复杂的高熵密码短语。</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-red-600 mt-1 text-xs">●</span>
              <span><strong>仅供教育：</strong> 此工具仅供教育目的使用，请勿用于真实资金或生产环境。</span>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="text-center">
        <button id="acceptDisclaimer" 
                class="px-8 py-3 md:px-10 md:py-4 bg-gradient-to-r from-purple-300 to-violet-400 hover:from-purple-400 hover:to-violet-500
                       text-white font-semibold rounded-2xl md:rounded-3xl z-50
                       transition-all duration-300 transform hover:scale-105 hover:-translate-y-1
                       shadow-lg shadow-purple-300/25 hover:shadow-xl hover:shadow-purple-400/40
                       text-sm md:text-base relative">
          I Understand & Accept / 我已理解并接受
        </button>
      </div>
    </div>
  </div>
  
  <!-- Subtle background texture -->
  <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
    <div class="absolute inset-0 bg-gradient-to-br from-purple-100/30 via-transparent to-violet-100/20"></div>
    <div class="absolute inset-0 bg-gradient-to-tl from-indigo-100/20 via-transparent to-purple-100/25"></div>
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(139,92,246,0.05)_0%,transparent_50%)] animate-pulse" style="animation-duration: 8s;"></div>
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(168,85,247,0.04)_0%,transparent_50%)] animate-pulse" style="animation-duration: 12s; animation-delay: 2s;"></div>
  </div>

  <!-- Main Container -->
  <div class="relative z-10 max-w-sm md:max-w-2xl lg:max-w-4xl xl:max-w-6xl mx-auto 
              md:rounded-3xl md:my-6 lg:my-8 
              overflow-hidden min-h-screen md:min-h-0">
    
    <!-- Header -->
    <div class="relative px-6 py-8 md:px-12 md:py-10 lg:px-16 lg:py-12 text-center">
      
      <!-- Mobile handle -->
      <div class="absolute top-3 left-1/2 transform -translate-x-1/2 
                  w-9 h-1.5 bg-slate-400/40 rounded-full md:hidden"></div>
      
                  <!-- Back Button -->
            <a href="index.html" 
               class="absolute top-5 left-6 md:left-12 lg:left-16 z-20
                      glass-card hover:glass-card rounded-full px-3 py-1.5 md:px-4 md:py-2
                      text-slate-500 hover:text-slate-700 text-sm font-medium 
                      transition-all duration-300 hover:scale-105 transform
                      flex items-center justify-center gap-1
                      shadow-lg shadow-slate-500/10 hover:shadow-xl hover:shadow-slate-500/20
                      bg-white/25 backdrop-blur-xl border border-white/30 hover:border-white/50
                      ring-1 ring-white/30 hover:ring-white/40 ring-inset
                      no-underline min-w-12 h-8 md:min-w-14 md:h-10"
               data-i18n="back">
                <span class="text-lg">←</span>
            </a>
      
      <!-- Language Toggle -->
      <button class="language-toggle absolute top-5 right-6 md:right-12 lg:right-16 z-20
                     glass-card hover:glass-card rounded-full px-3 py-1.5 md:px-4 md:py-2 
                     text-slate-500 hover:text-slate-700 text-sm font-medium 
                     cursor-pointer transition-all duration-300 hover:scale-105 transform
                     min-w-11 h-8 md:min-w-12 md:h-10 
                     flex items-center justify-center
                     shadow-lg shadow-slate-500/10 hover:shadow-xl hover:shadow-slate-500/20
                     bg-white/25 backdrop-blur-xl border border-white/30 hover:border-white/50
                     ring-1 ring-white/30 hover:ring-white/40 ring-inset" 
              onclick="toggleLanguage()">
        ENG
      </button>
      
      <!-- Title -->
      <div class="relative z-10">
        <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold text-slate-700 
                   tracking-tight mb-3 animate-fadeInUp" data-i18n="title">
          🧠 Brain Wallet
        </h1>
      </div>
    </div>
    
    <!-- Input Section -->
    <div class="p-6 md:p-12 lg:p-16">
      <div class="glass-card hover:glass-card rounded-2xl md:rounded-3xl 
                  p-6 md:p-8 transition-all duration-300 ease-out
                  shadow-xl shadow-slate-300/25 hover:shadow-2xl hover:shadow-slate-400/40
                  bg-white/20 backdrop-blur-xl border border-white/30 hover:border-white/50
                  ring-1 ring-white/20 hover:ring-white/35 ring-inset
                  animate-fadeInUp mb-8"
           style="animation-delay: 0.2s;">
        
        <div class="flex flex-col lg:flex-row gap-4 items-center">
          <input type="text" 
                 id="entropyInput" 
                 data-i18n-placeholder="inputPlaceholder" 
                 placeholder="Enter any text to generate wallet"
                 class="flex-1 w-full px-4 py-3 md:px-6 md:py-4
                        bg-white/50 backdrop-blur-xl border border-white/40
                        rounded-xl md:rounded-2xl text-slate-700 placeholder-slate-400
                        focus:outline-none focus:ring-2 focus:ring-purple-400/50 focus:border-purple-300
                        transition-all duration-300 hover:bg-white/60
                        text-sm md:text-base font-medium" />
          
          <button id="genMnemonic" 
                  data-i18n="generateBtn"
                  class="w-full lg:w-auto px-6 py-3 md:px-8 md:py-4
                         bg-gradient-to-r from-purple-300 to-violet-400 hover:from-purple-400 hover:to-violet-500
                         text-white font-semibold rounded-2xl md:rounded-3xl
                         transition-all duration-300 transform hover:scale-105 hover:-translate-y-1
                         shadow-lg shadow-purple-300/25 hover:shadow-xl hover:shadow-purple-400/40
                         text-sm md:text-base">
            Generate Wallet
          </button>
        </div>
      </div>

      <!-- Content Sections -->
      <div id="mainSection" style="display:none;" class="space-y-8">
        
        <!-- Input Text Display -->
        <div class="glass-card hover:glass-card rounded-2xl md:rounded-3xl 
                    p-6 md:p-8 transition-all duration-300 ease-out
                    shadow-xl shadow-slate-300/25 hover:shadow-2xl hover:shadow-slate-400/40
                    bg-white/20 backdrop-blur-xl border border-white/30 hover:border-white/50
                    ring-1 ring-white/20 hover:ring-white/35 ring-inset
                    animate-fadeInUp">
          
          <h2 class="text-lg md:text-xl lg:text-2xl font-bold text-slate-700 
                     tracking-tight mb-6 flex items-center gap-3">
            <span class="text-2xl">📝</span>
            <span data-i18n="inputTextTitle">Input Text</span>
          </h2>
          
          <div class="bg-white/50 backdrop-blur-xl border border-white/40 rounded-xl md:rounded-2xl p-4 md:p-6">
            <div id="inputTextDisplay" 
                 class="font-mono text-sm md:text-base text-slate-600 mb-4 
                        break-all leading-relaxed min-h-12">
            </div>
            <div class="flex justify-between items-center text-xs md:text-sm text-slate-500">
              <span data-i18n="inputTextLabel">Source text for wallet generation</span>
              <span id="inputTextLength" 
                    class="bg-white/60 px-2 py-1 rounded-lg border border-white/40 font-medium">
              </span>
            </div>
          </div>
        </div>

        <!-- Mnemonic Phrase -->
        <div class="glass-card hover:glass-card rounded-2xl md:rounded-3xl 
                    p-6 md:p-8 transition-all duration-300 ease-out
                    shadow-xl shadow-slate-300/25 hover:shadow-2xl hover:shadow-slate-400/40
                    bg-white/20 backdrop-blur-xl border border-white/30 hover:border-white/50
                    ring-1 ring-white/20 hover:ring-white/35 ring-inset
                    animate-fadeInUp">
          
          <h2 class="text-lg md:text-xl lg:text-2xl font-bold text-slate-700 
                     tracking-tight mb-6 flex items-center gap-3">
            <span class="text-2xl">🔐</span>
            <span data-i18n="mnemonicTitle">Mnemonic Phrase</span>
          </h2>
          
          <div id="mnemonicGrid" 
               class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 md:gap-4 mb-6">
          </div>
          
          <div class="text-center">
            <button id="copyMnemonic" 
                    data-i18n="copyBtn"
                    class="inline-block px-6 py-3 md:px-8 md:py-4
                           bg-gradient-to-r from-purple-300 to-violet-400 hover:from-purple-400 hover:to-violet-500
                           text-white font-semibold rounded-2xl md:rounded-3xl
                           transition-all duration-300 transform hover:scale-105 hover:-translate-y-1
                           shadow-lg shadow-purple-300/25 hover:shadow-xl hover:shadow-purple-400/40
                           text-sm md:text-base inline-flex items-center gap-2">
              📋 <span>Copy Mnemonic</span>
            </button>
      </div>

          <textarea id="mnemonic" 
                    readonly 
                    class="hidden w-full p-4 bg-white/50 backdrop-blur-xl border border-white/40 
                           rounded-xl font-mono text-sm resize-none"
                    rows="3">
          </textarea>
        </div>

        <!-- QR Code and Seed Container -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          
          <!-- QR Code -->
          <div class="glass-card hover:glass-card rounded-2xl md:rounded-3xl 
                      p-6 md:p-8 transition-all duration-300 ease-out
                      shadow-xl shadow-slate-300/25 hover:shadow-2xl hover:shadow-slate-400/40
                      bg-white/20 backdrop-blur-xl border border-white/30 hover:border-white/50
                      ring-1 ring-white/20 hover:ring-white/35 ring-inset
                      animate-fadeInUp">
            
            <h2 class="text-lg md:text-xl lg:text-2xl font-bold text-slate-700 
                       tracking-tight mb-6 flex items-center gap-3">
              <span class="text-2xl">📱</span>
              <span data-i18n="qrTitle">QR Code</span>
            </h2>
            
            <div class="flex justify-center">
              <canvas id="qrcode" 
                      class="rounded-xl md:rounded-2xl shadow-lg shadow-slate-300/25 
                             border border-white/40 bg-white/50 backdrop-blur-xl">
              </canvas>
            </div>
          </div>

          <!-- Seed -->
          <div class="glass-card hover:glass-card rounded-2xl md:rounded-3xl 
                      p-6 md:p-8 transition-all duration-300 ease-out
                      shadow-xl shadow-slate-300/25 hover:shadow-2xl hover:shadow-slate-400/40
                      bg-white/20 backdrop-blur-xl border border-white/30 hover:border-white/50
                      ring-1 ring-white/20 hover:ring-white/35 ring-inset
                      animate-fadeInUp">
            
            <h2 class="text-lg md:text-xl lg:text-2xl font-bold text-slate-700 
                       tracking-tight mb-6 flex items-center gap-3">
              <span class="text-2xl">🌱</span>
              <span data-i18n="seedTitle">Seed</span>
            </h2>
            
            <textarea id="seed" 
                      readonly 
                      rows="4"
                      class="w-full p-4 bg-white/50 backdrop-blur-xl border border-white/40 
                             rounded-xl md:rounded-2xl font-mono text-sm text-slate-600 
                             resize-none leading-relaxed">
            </textarea>
          </div>
        </div>

        <!-- Extended Public Keys and Addresses -->
        <div class="glass-card hover:glass-card rounded-2xl md:rounded-3xl 
                    p-6 md:p-8 transition-all duration-300 ease-out
                    shadow-xl shadow-slate-300/25 hover:shadow-2xl hover:shadow-slate-400/40
                    bg-white/20 backdrop-blur-xl border border-white/30 hover:border-white/50
                    ring-1 ring-white/20 hover:ring-white/35 ring-inset
                    animate-fadeInUp">
          
          <h2 class="text-lg md:text-xl lg:text-2xl font-bold text-slate-700 
                     tracking-tight mb-6 flex items-center gap-3">
            <span class="text-2xl">🔑</span>
            <span data-i18n="keysTitle">Extended Public Keys and Addresses</span>
          </h2>
          
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            
            <!-- Legacy -->
            <div class="bg-white/50 backdrop-blur-xl border border-white/40 rounded-xl md:rounded-2xl p-6
                        hover:bg-white/60 hover:border-white/50 transition-all duration-300
                        hover:-translate-y-1 hover:shadow-lg hover:shadow-slate-300/25">
              <div class="font-bold text-slate-700 mb-4 text-base md:text-lg" data-i18n="legacyLabel">
                Legacy (P2PKH)
    </div>
              <div id="xpub44" 
                   class="font-mono text-xs md:text-sm text-slate-600 bg-white/60 p-3 rounded-lg mb-3 
                          break-all leading-relaxed border border-white/40">
              </div>
              <div class="text-sm font-medium text-slate-500 mb-2" data-i18n="addressLabel">
                Address:
              </div>
              <div id="addr44" 
                   class="font-mono text-xs md:text-sm text-purple-600 bg-white/60 p-3 rounded-lg 
                          break-all leading-relaxed border border-white/40 font-semibold">
      </div>
    </div>
    
            <!-- Nested SegWit -->
            <div class="bg-white/50 backdrop-blur-xl border border-white/40 rounded-xl md:rounded-2xl p-6
                        hover:bg-white/60 hover:border-white/50 transition-all duration-300
                        hover:-translate-y-1 hover:shadow-lg hover:shadow-slate-300/25">
              <div class="font-bold text-slate-700 mb-4 text-base md:text-lg" data-i18n="segwitLabel">
                Nested SegWit (P2SH-P2WPKH)
          </div>
              <div id="xpub49" 
                   class="font-mono text-xs md:text-sm text-slate-600 bg-white/60 p-3 rounded-lg mb-3 
                          break-all leading-relaxed border border-white/40">
        </div>
              <div class="text-sm font-medium text-slate-500 mb-2" data-i18n="addressLabel">
                Address:
      </div>
              <div id="addr49" 
                   class="font-mono text-xs md:text-sm text-purple-600 bg-white/60 p-3 rounded-lg 
                          break-all leading-relaxed border border-white/40 font-semibold">
        </div>
      </div>

            <!-- Native SegWit -->
            <div class="bg-white/50 backdrop-blur-xl border border-white/40 rounded-xl md:rounded-2xl p-6
                        hover:bg-white/60 hover:border-white/50 transition-all duration-300
                        hover:-translate-y-1 hover:shadow-lg hover:shadow-slate-300/25">
              <div class="font-bold text-slate-700 mb-4 text-base md:text-lg" data-i18n="nativeSegwitLabel">
                Native SegWit (P2WPKH)
              </div>
              <div id="xpub84" 
                   class="font-mono text-xs md:text-sm text-slate-600 bg-white/60 p-3 rounded-lg mb-3 
                          break-all leading-relaxed border border-white/40">
              </div>
              <div class="text-sm font-medium text-slate-500 mb-2" data-i18n="addressLabel">
                Address:
              </div>
              <div id="addr84" 
                   class="font-mono text-xs md:text-sm text-purple-600 bg-white/60 p-3 rounded-lg 
                          break-all leading-relaxed border border-white/40 font-semibold">
              </div>
        </div>

            <!-- Taproot -->
            <div class="bg-white/50 backdrop-blur-xl border border-white/40 rounded-xl md:rounded-2xl p-6
                        hover:bg-white/60 hover:border-white/50 transition-all duration-300
                        hover:-translate-y-1 hover:shadow-lg hover:shadow-slate-300/25">
              <div class="font-bold text-slate-700 mb-4 text-base md:text-lg" data-i18n="taprootLabel">
                Taproot (P2TR)
              </div>
              <div id="xpub86" 
                   class="font-mono text-xs md:text-sm text-slate-600 bg-white/60 p-3 rounded-lg mb-3 
                          break-all leading-relaxed border border-white/40">
              </div>
              <div class="text-sm font-medium text-slate-500 mb-2" data-i18n="addressLabel">
                Address:
              </div>
              <div id="addr86" 
                   class="font-mono text-xs md:text-sm text-purple-600 bg-white/60 p-3 rounded-lg 
                          break-all leading-relaxed border border-white/40 font-semibold">
              </div>
        </div>
      </div>

          <div class="text-center">
            <button id="fetchUsage" 
                    data-i18n="checkUsageBtn"
                    class="inline-block px-6 py-3 md:px-8 md:py-4
                           bg-gradient-to-r from-emerald-300 to-teal-400 hover:from-emerald-400 hover:to-teal-500
                           text-white font-semibold rounded-2xl md:rounded-3xl
                           transition-all duration-300 transform hover:scale-105 hover:-translate-y-1
                           shadow-lg shadow-emerald-300/25 hover:shadow-xl hover:shadow-emerald-400/40
                           text-sm md:text-base">
              Check Wallet Usage
            </button>
          </div>
          
          <div id="usageResults" class="mt-8 text-center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="dist/brain-wallet.bundle.js"></script>
  
  <script>
    // Disclaimer modal logic
    function showDisclaimer() {
      const modal = document.getElementById('disclaimerModal');
      modal.classList.remove('hidden');
    }

    function hideDisclaimer() {
      const modal = document.getElementById('disclaimerModal');
      modal.classList.add('hidden');
      localStorage.setItem('brainWalletDisclaimerAccepted', 'true');
    }

    // Initialize page
    function initializePage() {
      // Check if disclaimer was already accepted
      const disclaimerAccepted = localStorage.getItem('brainWalletDisclaimerAccepted');
      if (disclaimerAccepted !== 'true') {
        showDisclaimer();
      } else {
        hideDisclaimer();
      }
      
      // Handle disclaimer acceptance
      document.getElementById('acceptDisclaimer').addEventListener('click', hideDisclaimer);
      
      // Show content with smooth fade-in after ensuring Tailwind is loaded
      setTimeout(() => {
        document.documentElement.classList.add('loaded');
        document.body.classList.add('loaded');
        
        // Signal that page is ready for bundle.js initialization
        window.pageReady = true;
        
        // Trigger bundle.js initialization if it's already loaded but waiting
        if (window.initializeBundleApp && typeof window.initializeBundleApp === 'function') {
          window.initializeBundleApp();
        }
      }, 50);
    }

    // Initialize as soon as DOM is ready and bundle is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializePage);
    } else {
      // DOM is already ready
      initializePage();
    }
    
    // Fallback: ensure page is visible after maximum wait time
    setTimeout(() => {
      if (!document.documentElement.classList.contains('loaded')) {
        document.documentElement.classList.add('loaded');
        document.body.classList.add('loaded');
      }
    }, 500);
  </script>
</body>
</html>